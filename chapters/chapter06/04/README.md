# 06-3 UDP의 데이터 송수신 특성과 UDP에서의 connect 함수 호출

책 내용에 더하여 내면화를 위한 추가 기술도 있음.  
암기하지 말고 이해하자. 암기하면 또 까먹는다...

TCP/IP와 비교/대조 해 가면서 공부하자.
그렇기에 TCP/IP에 대해서 제대로 이해하고 있어야 한다.

UDP는 데이터의 경계가 존재함을 예제를 통해서 살펴 보자.

---

## 데이터의 경계가 존재하는 UDP 소켓

UDP는 입력함수의 호출 횟수와 출력 함수의 호출 횟수가  
완벽히 일치해야 송신된 데이터 전부를 수신할 수 있다.

---

## connected UDP 소켓, unconnected UDP 소켓

TCP 소켓에는 데이터를 전송할 목적지의 IP와 PORT번호를 등록하는 반면,  
UDP 소켓에는 목적지의 IP와 PORT번호를 등록하지 않는다. (그때 그때마다 목적지가 달라질 수 있기 때문)

sendto 함수 호출을 통한 데이터의 전송은 크게 다음과 같은 세 단계로 나눌 수 있다고 한다.

* 1단계 UDP 소켓에 목적지의 IP와 PORT 등록
* 2단계 데이터 전송
* 3단계 UDP 소켓에 등록된 목적지 정보 삭제

이렇듯 목적지 정보가 등록되어 있지 않은 소켓을 가리켜 'unconnected 소켓'이라 하고,  
반면 목적지 정보가 등록되어 있는 소켓을 가리켜 'connected 소켓'이라 한다.

그런데 이러한 특성 때문에 하나의 호스트와 오랜 시간 데이터를 송수신해야 한다면,  
UDP 소켓을 connected 소켓으로 만드는 것이 효율적이다.

참고로 앞서 보인 1단계와 3단계가 데이터 전송 과정의 약 1/3에 해당한다고 한다.

---

## connected UDP 소켓 생성

connected UDP 소켓 생성은 간단하다. connect 함수만 적절하게 호출해주면 된다.

이렇게 구현하면 TCP 소켓과 마찬가지로 sendto 함수가 호출될 때마다 데이터 전송의 과정만 거치게 된다.  
뿐만 아니라 송수신 대상이 정해졌기 때문에 sendto, recvfrom 대신 write, read 함수로도 데이터를 송수신할 수 있다.



---
